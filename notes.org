* останавливаем типы, а не ключи
* кейворд - это объект
* символ - это сервис
* последняя арность
  берется первый агрумент последней арности
  нужно для multi-arity
* ~:as x~ пойдет
* ~_~ можно вместо описания
* конфиги - это тоже состояние
* внешние ресурсы из registry закрываются во вне
* ключи/символы без неймспейса
  глобальные штуки вроде ~{:keys [debug env]}~
* ключи-строки
  для переменных окружения
* multi arity
  зависимости берутся из последней арности
* ident -> key (?)
  ~ident?~  проверяет что это символ или кейворд, а у меня еще и строки
* alias
  в replacements значениями могут быть qualified keyword/symbol
  в этом случае это ссылка
* запуск нескольних веб-серверов
  #+begin_src clojure
    (with-open [shared (di/start ::shared)
                web-1  (di/start ::web {::shared @shared})
                web-2  (di/start ::web {::shared @shared})])
  #+end_src

* фабрика
  можно сделать еще одну фабрику
  это произвольная структура в которую встраиваются ссылки
** дефолты - это только про var
** в var сделать 2 случая
   1. функция
   2. все остальное считать фабрикой

* ref* вынести в отдельный кейс

* can't stop
  оно теперь рекурсивное
  нужно как-то передавать ident
